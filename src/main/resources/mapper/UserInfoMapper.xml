<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.qf.travel.mapper.UserInfoMapper">
    <!--<resultMap id="BaseResultMap" type="com.qf.travel.entity.BackStageUser">-->
        <!--&lt;!&ndash;-->
          <!--WARNING - @mbggenerated-->
          <!--This element is automatically generated by MyBatis Generator, do not modify.-->
        <!--&ndash;&gt;-->
        <!--<id column="id" jdbcType="INTEGER" property="id" />-->
        <!--<result column="username" jdbcType="VARCHAR" property="username" />-->
        <!--<result column="password" jdbcType="VARCHAR" property="password" />-->
    <!--</resultMap>-->

    <!-- 显示所有用户（包含管理员） -->
    <select id="listAllUserInfo" parameterType="com.qf.travel.vo.UserInfoVo" resultType="com.qf.travel.dto.UserInfoDto">
        SELECT id,username,regist_email,regist_phone,regist_status,update_time,phone,address,sex,login_time FROM t_userinfo WHERE user_state = 1
    </select>

    <!-- 删除用户 -->
    <update id="delUserInfo" parameterType="com.qf.travel.vo.UserInfoVo">
       update t_userinfo set user_state = 0 where id = #{id}
    </update>

    <!--批量删除用户-->
    <update id="delUserInfos" parameterType="com.qf.travel.vo.UserInfoVo">
        update t_userinfo set user_state = 0 where id in
            <foreach collection="ids" item="id" open="(" close=")" separator=",">
                #{id}
            </foreach>
    </update>

    <!--增加用户 -->
    <insert id="addUserInfo" parameterType="com.qf.travel.vo.UserInfoVo">
      insert into t_userinfo (id,username,password,regist_email,regist_phone,sex,address,user_state)
      values(default,#{username},#{password},#{regist_email},#{regist_phone},#{sex},#{address}, 1)
    </insert>

    <!-- 修改用户信息 -->
    <update id="updateUserInfo" parameterType="com.qf.travel.vo.UserInfoVo">
        UPDATE t_userinfo SET address = #{address}, username = #{username},
        regist_email = #{regist_email},regist_phone = #{regist_phone}
        WHERE id = #{id}
    </update>

    <!-- 个人信息回显 -->
    <select id="myInformation" parameterType="com.qf.travel.vo.UserInfoVo" resultType="com.qf.travel.vo.UserInfoVo">
        SELECT id,username,regist_email,regist_phone,regist_status,update_time,phone,address,sex,login_time
        FROM t_userinfo WHERE id = #{id}
    </select>

</mapper>